<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Video</title>
    <style>
        /* ...your existing styles... */
    </style>
    <script type="module" src="https://securepubads.shareus.io/scripts/tag/js/gpt.js"></script>
    <script>
        window._shareustag = window._shareustag || {cmd:[]};
        _shareustag.cmd.push(function() {
            _shareustag.defineSlot(
              '/shareus-admanager/3049258825/cevFiS93lz/Banner4',
              ["Responsive"],
              'shareus-admanager-3049258825-cevFiS93lz'
            );
        });
    </script>
</head>
<body>
    <!-- ...header and more-files section unchanged... -->

    <div id="detail-page">
        <!-- ...detail markup unchanged, except Get File button... -->
        <button class="btn" id="get-file">Get File</button>
        <!-- ... -->
    </div>

    <div id="search-overlay">
        <!-- ... -->
    </div>

    <script>
        const BOT_USERNAME = '{{ bot_username }}';
        // Collect video data
        const videos = Array.from(document.querySelectorAll('.hero-slide, .thumbnail')).map(item => ({
            thumb: item.getAttribute('data-thumb'),
            title: item.getAttribute('data-title'),
            key: item.getAttribute('data-key')
        }));

        // Replace inline timer flow with redirect to new page:
        document.body.addEventListener('click', e => {
            const item = e.target.closest('.hero-slide, .thumbnail, .watch-now');
            if (!item) return;
            const thumb = item.getAttribute('data-thumb');
            const title = item.getAttribute('data-title');
            const key   = item.getAttribute('data-key');
            // Populate detail overlay
            document.getElementById('detail-thumb').src = thumb;
            document.getElementById('detail-title').textContent = title;
            document.getElementById('get-file').style.display = 'inline-block';
            document.getElementById('open-link').style.display = 'none';
            document.getElementById('timer').textContent = '';
            document.getElementById('get-file').onclick = () => {
                window.location = `/file/${key}`;
            };
            document.getElementById('detail-page').classList.add('open');
            if (window._shareustag) {
                _shareustag.cmd.push(() => {
                    _shareustag.display('shareus-admanager-3049258825-cevFiS93lz');
                });
            }
        });

        // Close detail and search handlers (unchanged)...
    </script>
</body>
</html>
